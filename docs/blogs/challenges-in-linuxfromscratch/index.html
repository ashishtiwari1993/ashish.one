<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Challenges in linuxfromscratch | ashish.one</title><meta name=keywords content="linux,linuxfromscratch,lfs,LFS,linuxfromscratch.org,ubuntu"><meta name=description content="Successfully built custom #Linux system by referring https://t.co/lyrdKkfXo9 .
Listed my challenges here https://t.co/gU2SoAxly2@nixcraft#linux #lfs #linuxfromscratch pic.twitter.com/XlWchVHy26
&mdash; Ashish Tiwari ðŸ‡®ðŸ‡³ (@_ashish_tiwari) April 27, 2020 I have started with www.linuxfromscratch.org, I am facing some challenges and problems which I am going to share with you in this blog. I will keep updating this blog as well as I move forward.
Before we get start You need some basic linux command knowledge to use linuxfromscratch guide."><meta name=author content="Ashish Tiwari"><link rel=canonical href=https://ashish.one/blogs/challenges-in-linuxfromscratch/><link crossorigin=anonymous href=https://ashish.one/assets/css/stylesheet.ba7b1a0e212a12ce4d86f957158b1ebf0c5d1a6c7ad2b8d146953d5e6efa5beb.css integrity="sha256-unsaDiEqEs5NhvlXFYsevwxdGmx60rjRRpU9Xm76W+s=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=https://ashish.one/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://ashish.one/favicon.png><link rel=icon type=image/png sizes=16x16 href=https://ashish.one/favicon.png><link rel=icon type=image/png sizes=32x32 href=https://ashish.one/favicon.png><link rel=apple-touch-icon href=https://ashish.one/favicon.png><link rel=mask-icon href=https://ashish.one/favicon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-149424518-1","auto"),ga("send","pageview"))</script><meta property="og:title" content="Challenges in linuxfromscratch"><meta property="og:description" content="Successfully built custom #Linux system by referring https://t.co/lyrdKkfXo9 .
Listed my challenges here https://t.co/gU2SoAxly2@nixcraft#linux #lfs #linuxfromscratch pic.twitter.com/XlWchVHy26
&mdash; Ashish Tiwari ðŸ‡®ðŸ‡³ (@_ashish_tiwari) April 27, 2020 I have started with www.linuxfromscratch.org, I am facing some challenges and problems which I am going to share with you in this blog. I will keep updating this blog as well as I move forward.
Before we get start You need some basic linux command knowledge to use linuxfromscratch guide."><meta property="og:type" content="article"><meta property="og:url" content="https://ashish.one/blogs/challenges-in-linuxfromscratch/"><meta property="og:image" content="https://pbs.twimg.com/media/EWmoua6UYAAjwgC?format=jpg&name=large"><meta property="article:section" content="blogs"><meta property="article:published_time" content="2020-04-11T13:55:52+05:30"><meta property="article:modified_time" content="2022-05-11T14:47:26+05:30"><meta property="og:site_name" content="ashish.one"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://pbs.twimg.com/media/EWmoua6UYAAjwgC?format=jpg&name=large"><meta name=twitter:title content="Challenges in linuxfromscratch"><meta name=twitter:description content="Successfully built custom #Linux system by referring https://t.co/lyrdKkfXo9 .
Listed my challenges here https://t.co/gU2SoAxly2@nixcraft#linux #lfs #linuxfromscratch pic.twitter.com/XlWchVHy26
&mdash; Ashish Tiwari ðŸ‡®ðŸ‡³ (@_ashish_tiwari) April 27, 2020 I have started with www.linuxfromscratch.org, I am facing some challenges and problems which I am going to share with you in this blog. I will keep updating this blog as well as I move forward.
Before we get start You need some basic linux command knowledge to use linuxfromscratch guide."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blogs","item":"https://ashish.one/blogs/"},{"@type":"ListItem","position":2,"name":"Challenges in linuxfromscratch","item":"https://ashish.one/blogs/challenges-in-linuxfromscratch/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Challenges in linuxfromscratch","name":"Challenges in linuxfromscratch","description":"Successfully built custom #Linux system by referring https://t.co/lyrdKkfXo9 .\nListed my challenges here https://t.co/gU2SoAxly2@nixcraft#linux #lfs #linuxfromscratch pic.twitter.com/XlWchVHy26\n\u0026mdash; Ashish Tiwari ðŸ‡®ðŸ‡³ (@_ashish_tiwari) April 27, 2020 I have started with www.linuxfromscratch.org, I am facing some challenges and problems which I am going to share with you in this blog. I will keep updating this blog as well as I move forward.\nBefore we get start You need some basic linux command knowledge to use linuxfromscratch guide.","keywords":["linux","linuxfromscratch","lfs","LFS","linuxfromscratch.org","ubuntu"],"articleBody":" Successfully built custom #Linux system by referring https://t.co/lyrdKkfXo9 .\nListed my challenges here https://t.co/gU2SoAxly2@nixcraft#linux #lfs #linuxfromscratch pic.twitter.com/XlWchVHy26\nâ€” Ashish Tiwari ðŸ‡®ðŸ‡³ (@_ashish_tiwari) April 27, 2020 I have started with www.linuxfromscratch.org, I am facing some challenges and problems which I am going to share with you in this blog. I will keep updating this blog as well as I move forward.\nBefore we get start You need some basic linux command knowledge to use linuxfromscratch guide. I am going to build LFS on my local machine. If your machine has a different OS or different configuration, Then some solution will not work.\nI am going to use the same chapter title as mentioned in linuxfromscratch. I will skip those sections where I havenâ€™t faced any difficulties.\nMy Machine Configuration OS: Ubuntu 14.04 RAM: 2GB Disk: 500 GB Going to build LFS version: 9.1 Published: March 1st, 2020 LFS doc:http://www.linuxfromscratch.org/lfs/downloads/9.1/LFS-BOOK-9.1-NOCHUNKS.html Challenges 2.2. Host System Requirements Doc link: http://www.linuxfromscratch.org/lfs/downloads/9.1/LFS-BOOK-9.1-NOCHUNKS.html#ch-partitioning-hostreqs\nVersion check cat \u003e version-check.sh \u003c\u003c \"EOF\" #!/bin/bash # Simple script to list version numbers of critical development tools export LC_ALL=C bash --version | head -n1 | cut -d\" \" -f2-4 MYSH=$(readlink -f /bin/sh) echo \"/bin/sh -\u003e $MYSH\" echo $MYSH | grep -q bash || echo \"ERROR: /bin/sh does not point to bash\" unset MYSH echo -n \"Binutils: \"; ld --version | head -n1 | cut -d\" \" -f3- bison --version | head -n1 if [ -h /usr/bin/yacc ]; then echo \"/usr/bin/yacc -\u003e `readlink -f /usr/bin/yacc`\"; elif [ -x /usr/bin/yacc ]; then echo yacc is `/usr/bin/yacc --version | head -n1` else echo \"yacc not found\" fi bzip2 --version 2\u003e\u00261 \u003c /dev/null | head -n1 | cut -d\" \" -f1,6- echo -n \"Coreutils: \"; chown --version | head -n1 | cut -d\")\" -f2 diff --version | head -n1 find --version | head -n1 gawk --version | head -n1 if [ -h /usr/bin/awk ]; then echo \"/usr/bin/awk -\u003e `readlink -f /usr/bin/awk`\"; elif [ -x /usr/bin/awk ]; then echo awk is `/usr/bin/awk --version | head -n1` else echo \"awk not found\" fi gcc --version | head -n1 g++ --version | head -n1 ldd --version | head -n1 | cut -d\" \" -f2- # glibc version grep --version | head -n1 gzip --version | head -n1 cat /proc/version m4 --version | head -n1 make --version | head -n1 patch --version | head -n1 echo Perl `perl -V:version` python3 --version sed --version | head -n1 tar --version | head -n1 makeinfo --version | head -n1 # texinfo version xz --version | head -n1 echo 'int main(){}' \u003e dummy.c \u0026\u0026 g++ -o dummy dummy.c if [ -x dummy ] then echo \"g++ compilation OK\"; else echo \"g++ compilation failed\"; fi rm -f dummy.c dummy EOF bash version-check.sh Error 1: /bin/sh does not point to bash\nsudo ln -sf bash /bin/sh Error 2: version-check.sh: line 11: bison: command not found\nsudo apt-get install bison Error 3: version-check.sh: line 25: gawk: command not found\nsudo apt-get install gawk Error 4: version-check.sh: line 36: g++: command not found\nsudo apt-get install g++ Error 5: version-check.sh: line 48: makeinfo: command not found\nsudo apt-get update -y sudo apt-get install -y texinfo Final success output: $ bash version-check.sh bash, version 4.3.11(1)-release /bin/sh -\u003e /bin/bash Binutils: (GNU Binutils for Ubuntu) 2.24 bison (GNU Bison) 3.0.2 /usr/bin/yacc -\u003e /usr/bin/bison.yacc bzip2, Version 1.0.6, 6-Sept-2010. Coreutils: 8.21 diff (GNU diffutils) 3.3 find (GNU findutils) 4.4.2 GNU Awk 4.0.1 /usr/bin/awk -\u003e /usr/bin/gawk gcc (Ubuntu 4.8.4-2ubuntu1~14.04.4) 4.8.4 g++ (Ubuntu 4.8.4-2ubuntu1~14.04.4) 4.8.4 (Ubuntu EGLIBC 2.19-0ubuntu6.15) 2.19 grep (GNU grep) 2.16 gzip 1.6 Linux version 4.4.0-142-generic (buildd@lcy01-amd64-006) (gcc version 4.8.4 (Ubuntu 4.8.4-2ubuntu1~14.04.4) ) #168~14.04.1-Ubuntu SMP Sat Jan 19 11:26:28 UTC 2019 m4 (GNU M4) 1.4.17 GNU Make 3.81 GNU patch 2.7.1 Perl version='5.18.2'; Python 3.4.3 sed (GNU sed) 4.2.2 tar (GNU tar) 1.27.1 makeinfo (GNU texinfo) 5.2 xz (XZ Utils) 5.1.0alpha g++ compilation OK 2.5. Creating a File System on the Partition Doc link: http://www.linuxfromscratch.org/lfs/downloads/9.1/LFS-BOOK-9.1-NOCHUNKS.html#ch-partitioning-creatingfilesystem\nI had only one partition. I need to create new physical partition for LFS.\nIt is recommended to use Physical partition only not logical.\nI have reinstall my OS with new partition which is long way. You can use GParted to make partitions. Remember you can create only 4 Physical partition. Give 1 physical partition dedicated to LFS. Below is my partition view.\n$ lsblk NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sda 8:0 0 465.8G 0 disk |-sda1 8:1 0 476M 0 part /boot/efi |-sda2 8:2 0 1.9G 0 part [SWAP] |-sda3 8:3 0 190.8G 0 part / `-sda4 8:4 0 272.7G 0 part /lfs Challenge: My Partition wipe out after restart my system After restart I again hit the same command lsblk. /lfs partition was not there.\nIn Ubuntu, You need to make entry in /etc/fstab in order to mount the partition on restart.\nYou have to find first volumeId or UUID to make entry in /etc/fstab. You can use blkid command to get all UUID:\n$ blkid /dev/sda1: UUID=\"1FBD-F51A\" TYPE=\"vfat\" /dev/sda2: UUID=\"9f41c453-3b5c-4537-81b0-2fb33f19ded8\" TYPE=\"swap\" /dev/sda3: UUID=\"1a16afba-cabb-40c7-b704-1129b7004ffb\" TYPE=\"ext4\" /dev/sda4: UUID=\"b3b2eb8c-2a43-405d-97da-af8b46c743e2\" TYPE=\"ext4\" Above my Partition is /dev/sda4 which is mounted on /lfs, So my UUID is b3b2eb8c-2a43-405d-97da-af8b46c743e2. Now I have added below line in /etc/fstab.\nUUID=b3b2eb8c-2a43-405d-97da-af8b46c743e2 /lfs ext4 rw,user,exec,errors=remount-ro 0 0 Here\nrw: Read, Write exec: Execute errors=remount-ro: It will mount as Read-Only, If you get any error on mounting. Make sure you have added exec, Otherwise you cannot execute any binaries from chapter 5.4. Binutils-2.34 - Pass 1\n5.4. Binutils-2.34 - Pass 1 Doc link: http://www.linuxfromscratch.org/lfs/downloads/9.1/LFS-BOOK-9.1-NOCHUNKS.html#ch-tools-binutils-pass1\nError 1: bash: ../configure: No such file or directory As I mentioned on above Section, Make sure you have added exec in your /etc/fstab entry OR Make sure your partition /lfs has Read, Write \u0026 Execute permission. Below /etc/fstab entry worked for me:\nUUID=b3b2eb8c-2a43-405d-97da-af8b46c743e2 /lfs ext4 rw,user,exec,errors=remount-ro 0 0 This setting can be different for different OS.\nError 2: I had no idea where to create build folder.\nBelow steps worked for me:\n$ cd $LFS/source $ tar xvf binutils-2.34.tar.xz $ cd binutils-2.34 $ mkdir -v build $ cd build $ ../configure --prefix=/tools \\ --with-sysroot=$LFS \\ --with-lib-path=/tools/lib \\ --target=$LFS_TGT \\ --disable-nls \\ --disable-werror 5.5. GCC-9.2.0 - Pass 1 cd $LFS/sources tar -xvf gcc-9.2.0.tar.xz cd gcc-9.2.0 After this you can continue with document flow.\ntar -xf ../mpfr-4.0.2.tar.xz mv -v mpfr-4.0.2 mpfr tar -xf ../gmp-6.2.0.tar.xz mv -v gmp-6.2.0 gmp tar -xf ../mpc-1.1.0.tar.gz mv -v mpc-1.1.0 mpc Error 1: On make command, I got below error:\nerror: â€˜forâ€™ loop initial declarations are only allowed in C99 mode compute_powtab.c: In function 'mpn_compute_powtab_mul': compute_powtab.c:142:3: error: 'for' loop initial declarations are only allowed in C99 mode for (long pi = start_idx; pi \u003e= 0; pi--) ^ compute_powtab.c:142:3: note: use option -std=c99 or -std=gnu99 to compile your code compute_powtab.c: In function 'mpn_compute_powtab_div': compute_powtab.c:226:3: error: 'for' loop initial declarations are only allowed in C99 mode for (long pi = n_pows - 1; pi \u003e= 0; pi--) ^ compute_powtab.c:274:13: error: redefinition of 'pi' for (long pi = n_pows; pi \u003e= 0; pi--) ^ compute_powtab.c:226:13: note: previous definition of 'pi' was here for (long pi = n_pows - 1; pi \u003e= 0; pi--) ^ compute_powtab.c:274:3: error: 'for' loop initial declarations are only allowed in C99 mode for (long pi = n_pows; pi \u003e= 0; pi--) ^ compute_powtab.c: In function 'powtab_decide': compute_powtab.c:296:3: error: 'for' loop initial declarations are only allowed in C99 mode for (size_t pn = (un + 1) \u003e\u003e 1; pn != 1; pn = (pn + 1) \u003e\u003e 1) ^ compute_powtab.c:304:10: error: redefinition of 'pn' size_t pn = un - 1; ^ compute_powtab.c:296:15: note: previous definition of 'pn' was here for (size_t pn = (un + 1) \u003e\u003e 1; pn != 1; pn = (pn + 1) \u003e\u003e 1) ^ compute_powtab.c:308:3: error: 'for' loop initial declarations are only allowed in C99 mode for (long i = n_pows - 2; i \u003e= 0; i--) As per (https://stackoverflow.com/a/29338269)[https://stackoverflow.com/a/29338269],\nThis happens because declaring variables inside a for loop wasnâ€™t valid C until C99(which is the standard of C published in 1999).\nHow I sovled this? Open file:\nvim $LFS/sources/gcc-9.2.0/build/gmp/mpn/compute_powtab.c We will solve first error:\ncompute_powtab.c:226:3: error: 'for' loop initial declarations are only allowed in C99 mode for (long pi = n_pows - 1; pi \u003e= 0; pi--) Changes on line number 226:\nlong pi; for (pi = n_pows - 1; pi \u003e= 0; pi--) { Just declare long pi; outside the loop. Similarly you can solve above all errors.\nOR\nYou can download my edited version of compute_powtab.c, Place in $LFS/sources/gcc-9.2.0/build/gmp/mpn/.\nHit\nmake Now it should works :)\n5.7. Glibc-2.31 On below command:\n../configure \\ --prefix=/tools \\ --host=$LFS_TGT \\ --build=$(../scripts/config.guess) \\ --enable-kernel=3.2 \\ Error: These critical programs are missing or too old: make configure: error: *** These critical programs are missing or too old: make *** Check the INSTALL file for required versions. I checked my current make version:\n$ make --version GNU Make 3.81 Copyright (C) 2006 Free Software Foundation, Inc. This is free software; see the source for copying conditions. There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. This program built for x86_64-pc-linux-gnu As per (https://stackoverflow.com/a/31915313)[https://stackoverflow.com/a/31915313]\nDue to a long-standing unresolved Debian bug report, GNU Make remained the age-old 3.81 in Debian for a very long time, and as a consequence, in Debian-based distributions such as Ubuntu and Mint.\nSo we need to upgrade our make version. Below steps worked for me.\ncd /tmp wget http://ftp.gnu.org/gnu/make/make-4.1.tar.gz tar xvf make-4.1.tar.gz cd make-4.1/ ./configure make sudo make install sudo mv /usr/local/bin/make /usr/bin/make Now again hit ../configure .. command, Now it should work :)\n6.7. Linux-5.5.3 API Headers Error (lfs chroot) root:/sources/linux-5.5.3# make mrproper /bin/sh: sed: command not found Makefile:653: arch//Makefile: No such file or directory make: *** No rule to make target 'arch//Makefile'. Stop. Because of my silly mistake. I had not installed the sed package. I just reinstall the package.\n6.12. Bzip2-1.0.8 Error: collect2: error: ld returned 1 exit status make: *** [Makefile-libbz2_so:38: all] Error 1 Just hit make clean.\nAgain run make -f Makefile-libbz2_so.\n6.18. Binutils-2.34 $ make -k check make[5]: *** [Makefile:2565: check-DEJAGNU] Error 1 make[5]: Leaving directory '/sources/binutils-2.34/build_6.18/ld' make[4]: *** [Makefile:1902: check-am] Error 2 make[4]: Leaving directory '/sources/binutils-2.34/build_6.18/ld' make[3]: *** [Makefile:1771: check-recursive] Error 1 make[3]: Leaving directory '/sources/binutils-2.34/build_6.18/ld' make[2]: *** [Makefile:1904: check] Error 2 make[2]: Leaving directory '/sources/binutils-2.34/build_6.18/ld' make[1]: *** [Makefile:7568: check-ld] Error 2 make[1]: Leaving directory '/sources/binutils-2.34/build_6.18' make: *** [Makefile:2222: do-check] Error 2 As I research these are few common errors But as I have not found any solution So I jump on to the next step as suggested in various places.\nmake tooldir=/usr install\nIf you get any solution of above error, Feel free to comment below.\n6.25. GCC-9.2.0 Error 1: make: *** [Makefile:2295: do-check] Error 2 I ignored this and move to next steps.\nError 2: Got no output with below command: echo 'int main(){}' \u003e dummy.c cc dummy.c -v -Wl,--verbose \u0026\u003e dummy.log readelf -l a.out | grep ': /lib' Performed below steps as mentioned on this link https://stackoverflow.com/a/48289145:\ngcc -dumpspecs | sed -e 's@/tools@@g' \u003e `dirname $(gcc --print-libgcc-file-name)`/specs Again perform above command:\necho 'int main(){}' \u003e dummy.c $ cc dummy.c -v -Wl,--verbose \u0026\u003e dummy.log readelf -l a.out | grep ': /lib' [Requesting program interpreter: /lib64/ld-linux-x86-64.so.2] 6.41. Perl-5.30.1 Error: erlio.c:(.text+0x91b): undefined reference to `pthread_getspecific' /usr/bin/ld: perlio.o:perlio.c:(.text+0x44e4): more undefined references to `pthread_getspecific' follow collect2: error: ld returned 1 exit status make: *** [makefile:364: lib/buildcustomize.pl] Error 1 Solution which suggested here https://www.linuxquestions.org/questions/linux-from-scratch-13/errors-with-6-40-perl-5-28-0-a-4175642138/ It worked for me.\nitâ€™s due to not having deleted the extracted Perl-5.28.0 directory after Chapter 5. I deleted the folder. Again untar the file.\n8.4. Using GRUB to Set Up the Boot Process NOTE: I have not performed this section, Becuase I am going to use my host systemâ€™s (Ubuntu 14.04) GRUB bootloader. Just go to another terminal of host system and hit below command.\nsudo update-grub2 After this again go to old terminal(LFS) and proceed with next step (The End).\nPlease comment below if you facing any issue.\nThanks\n","wordCount":"1962","inLanguage":"en","image":"https://pbs.twimg.com/media/EWmoua6UYAAjwgC?format=jpg\u0026name=large","datePublished":"2020-04-11T13:55:52+05:30","dateModified":"2022-05-11T14:47:26+05:30","author":{"@type":"Person","name":"Ashish Tiwari"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://ashish.one/blogs/challenges-in-linuxfromscratch/"},"publisher":{"@type":"Organization","name":"ashish.one","logo":{"@type":"ImageObject","url":"https://ashish.one/favicon.png"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://ashish.one/ accesskey=h title="Ashish Tiwari (Alt + H)">Ashish Tiwari</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://ashish.one/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://ashish.one/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://ashish.one/talks/ title=Talks><span>Talks</span></a></li><li><a href=https://ashish.one/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://ashish.one/archives/ title=Archives><span>Archives</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://ashish.one/>Home</a>&nbsp;Â»&nbsp;<a href=https://ashish.one/blogs/>Blogs</a></div><h1 class=post-title>Challenges in linuxfromscratch</h1><div class=post-meta><span title='2020-04-11 13:55:52 +0530 IST'>April 11, 2020</span>&nbsp;Â·&nbsp;10 min&nbsp;Â·&nbsp;Ashish Tiwari&nbsp;|&nbsp;<a href=https://github.com/ashishtiwari1993/ashish.one/tree/master/content/blogs/lfs.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#before-we-get-start aria-label="Before we get start">Before we get start</a></li><li><a href=#my-machine-configuration aria-label="My Machine Configuration">My Machine Configuration</a></li><li><a href=#going-to-build aria-label="Going to build">Going to build</a></li><li><a href=#challenges aria-label=Challenges>Challenges</a></li><li><a href=#22-host-system-requirements aria-label="2.2. Host System Requirements">2.2. Host System Requirements</a><ul><li><a href=#version-check aria-label="Version check">Version check</a></li><li><a href=#error-1 aria-label="Error 1:">Error 1:</a></li><li><a href=#error-2 aria-label="Error 2:">Error 2:</a></li><li><a href=#error-3 aria-label="Error 3:">Error 3:</a></li><li><a href=#error-4 aria-label="Error 4:">Error 4:</a></li><li><a href=#error-5 aria-label="Error 5:">Error 5:</a></li><li><a href=#final-success-output aria-label="Final success output:">Final success output:</a></li></ul></li><li><a href=#25-creating-a-file-system-on-the-partition aria-label="2.5. Creating a File System on the Partition">2.5. Creating a File System on the Partition</a><ul><li><a href=#challenge-my-partition-wipe-out-after-restart-my-system aria-label="Challenge: My Partition wipe out after restart my system">Challenge: My Partition wipe out after restart my system</a></li></ul></li><li><a href=#54-binutils-234---pass-1 aria-label="5.4. Binutils-2.34 - Pass 1">5.4. Binutils-2.34 - Pass 1</a><ul><li><a href=#error-1-1 aria-label="Error 1:">Error 1:</a></li><li><a href=#error-2-1 aria-label="Error 2:">Error 2:</a></li></ul></li><li><a href=#55-gcc-920---pass-1 aria-label="5.5. GCC-9.2.0 - Pass 1">5.5. GCC-9.2.0 - Pass 1</a><ul><li><a href=#error-1-2 aria-label="Error 1:">Error 1:</a><ul><li><a href=#error-for-loop-initial-declarations-are-only-allowed-in-c99-mode aria-label="error: &amp;lsquo;for&amp;rsquo; loop initial declarations are only allowed in C99 mode">error: &lsquo;for&rsquo; loop initial declarations are only allowed in C99 mode</a></li><li><a href=#how-i-sovled-this aria-label="How I sovled this?">How I sovled this?</a></li></ul></li></ul></li><li><a href=#57-glibc-231 aria-label="5.7. Glibc-2.31">5.7. Glibc-2.31</a><ul><li><a href=#error-these-critical-programs-are-missing-or-too-old-make aria-label="Error: These critical programs are missing or too old: make">Error: These critical programs are missing or too old: make</a></li></ul></li><li><a href=#67-linux-553-api-headers aria-label="6.7. Linux-5.5.3 API Headers">6.7. Linux-5.5.3 API Headers</a><ul><li><a href=#error aria-label=Error>Error</a></li></ul></li><li><a href=#612-bzip2-108 aria-label="6.12. Bzip2-1.0.8">6.12. Bzip2-1.0.8</a><ul><li><a href=#error-6 aria-label=Error:>Error:</a></li></ul></li><li><a href=#618-binutils-234 aria-label="6.18. Binutils-2.34">6.18. Binutils-2.34</a></li><li><a href=#625-gcc-920 aria-label="6.25. GCC-9.2.0">6.25. GCC-9.2.0</a><ul><li><a href=#error-1-3 aria-label="Error 1:">Error 1:</a></li><li><a href=#error-2-got-no-output-with-below-command aria-label="Error 2: Got no output with below command:">Error 2: Got no output with below command:</a></li></ul></li><li><a href=#641-perl-5301 aria-label="6.41. Perl-5.30.1">6.41. Perl-5.30.1</a><ul><li><a href=#error-7 aria-label=Error:>Error:</a></li></ul></li><li><a href=#84-using-grub-to-set-up-the-boot-process aria-label="8.4. Using GRUB to Set Up the Boot Process">8.4. Using GRUB to Set Up the Boot Process</a></li></ul></div></details></div><div class=post-content><p><img loading=lazy src="https://pbs.twimg.com/media/EWmoua6UYAAjwgC?format=jpg&name=large" alt=lfs_screen></p><blockquote class=twitter-tweet><p lang=en dir=ltr>Successfully built custom <a href="https://twitter.com/hashtag/Linux?src=hash&ref_src=twsrc%5Etfw">#Linux</a> system by referring <a href=https://t.co/lyrdKkfXo9>https://t.co/lyrdKkfXo9</a> .<br><br>Listed my challenges here <a href=https://t.co/gU2SoAxly2>https://t.co/gU2SoAxly2</a><a href="https://twitter.com/nixcraft?ref_src=twsrc%5Etfw">@nixcraft</a><a href="https://twitter.com/hashtag/linux?src=hash&ref_src=twsrc%5Etfw">#linux</a> <a href="https://twitter.com/hashtag/lfs?src=hash&ref_src=twsrc%5Etfw">#lfs</a> <a href="https://twitter.com/hashtag/linuxfromscratch?src=hash&ref_src=twsrc%5Etfw">#linuxfromscratch</a> <a href=https://t.co/XlWchVHy26>pic.twitter.com/XlWchVHy26</a></p>&mdash; Ashish Tiwari ðŸ‡®ðŸ‡³ (@_ashish_tiwari) <a href="https://twitter.com/_ashish_tiwari/status/1254719517491511296?ref_src=twsrc%5Etfw">April 27, 2020</a></blockquote><script async src=https://platform.twitter.com/widgets.js></script><p>I have started with <a href=https://www.linuxfromscratch.org>www.linuxfromscratch.org</a>, I am facing some challenges and problems which I am going to share with you in this blog. I will keep updating this blog as well as I move forward.</p><h2 id=before-we-get-start>Before we get start<a hidden class=anchor aria-hidden=true href=#before-we-get-start>#</a></h2><p>You need some basic linux command knowledge to use linuxfromscratch guide. I am going to build LFS on my local machine. If your machine has a different OS or different configuration, Then some solution will not work.</p><p>I am going to use the same chapter title as mentioned in linuxfromscratch. I will skip those sections where I haven&rsquo;t faced any difficulties.</p><h2 id=my-machine-configuration>My Machine Configuration<a hidden class=anchor aria-hidden=true href=#my-machine-configuration>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>OS: Ubuntu 14.04
</span></span><span style=display:flex><span>RAM: 2GB
</span></span><span style=display:flex><span>Disk: <span style=color:#ae81ff>500</span> GB
</span></span></code></pre></div><h2 id=going-to-build>Going to build<a hidden class=anchor aria-hidden=true href=#going-to-build>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>LFS version: 9.1
</span></span><span style=display:flex><span>Published: March 1st, <span style=color:#ae81ff>2020</span>
</span></span><span style=display:flex><span>LFS doc:http://www.linuxfromscratch.org/lfs/downloads/9.1/LFS-BOOK-9.1-NOCHUNKS.html
</span></span></code></pre></div><h2 id=challenges>Challenges<a hidden class=anchor aria-hidden=true href=#challenges>#</a></h2><h2 id=22-host-system-requirements>2.2. Host System Requirements<a hidden class=anchor aria-hidden=true href=#22-host-system-requirements>#</a></h2><p>Doc link: <a href=http://www.linuxfromscratch.org/lfs/downloads/9.1/LFS-BOOK-9.1-NOCHUNKS.html#ch-partitioning-hostreqs>http://www.linuxfromscratch.org/lfs/downloads/9.1/LFS-BOOK-9.1-NOCHUNKS.html#ch-partitioning-hostreqs</a></p><h3 id=version-check>Version check<a hidden class=anchor aria-hidden=true href=#version-check>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cat &gt; version-check.sh &lt;&lt; <span style=color:#e6db74>&#34;EOF&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Simple script to list version numbers of critical development tools</span>
</span></span><span style=display:flex><span>export LC_ALL<span style=color:#f92672>=</span>C
</span></span><span style=display:flex><span>bash --version | head -n1 | cut -d<span style=color:#e6db74>&#34; &#34;</span> -f2-4
</span></span><span style=display:flex><span>MYSH<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>readlink -f /bin/sh<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;/bin/sh -&gt; </span>$MYSH<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>echo $MYSH | grep -q bash <span style=color:#f92672>||</span> echo <span style=color:#e6db74>&#34;ERROR: /bin/sh does not point to bash&#34;</span>
</span></span><span style=display:flex><span>unset MYSH
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>echo -n <span style=color:#e6db74>&#34;Binutils: &#34;</span>; ld --version | head -n1 | cut -d<span style=color:#e6db74>&#34; &#34;</span> -f3-
</span></span><span style=display:flex><span>bison --version | head -n1
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -h /usr/bin/yacc <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  echo <span style=color:#e6db74>&#34;/usr/bin/yacc -&gt; `readlink -f /usr/bin/yacc`&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>elif</span> <span style=color:#f92672>[</span> -x /usr/bin/yacc <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  echo yacc is <span style=color:#e6db74>`</span>/usr/bin/yacc --version | head -n1<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>  echo <span style=color:#e6db74>&#34;yacc not found&#34;</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>bzip2 --version 2&gt;&amp;<span style=color:#ae81ff>1</span> &lt; /dev/null | head -n1 | cut -d<span style=color:#e6db74>&#34; &#34;</span> -f1,6-
</span></span><span style=display:flex><span>echo -n <span style=color:#e6db74>&#34;Coreutils: &#34;</span>; chown --version | head -n1 | cut -d<span style=color:#e6db74>&#34;)&#34;</span> -f2
</span></span><span style=display:flex><span>diff --version | head -n1
</span></span><span style=display:flex><span>find --version | head -n1
</span></span><span style=display:flex><span>gawk --version | head -n1
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -h /usr/bin/awk <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  echo <span style=color:#e6db74>&#34;/usr/bin/awk -&gt; `readlink -f /usr/bin/awk`&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>elif</span> <span style=color:#f92672>[</span> -x /usr/bin/awk <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  echo awk is <span style=color:#e6db74>`</span>/usr/bin/awk --version | head -n1<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span> 
</span></span><span style=display:flex><span>  echo <span style=color:#e6db74>&#34;awk not found&#34;</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>gcc --version | head -n1
</span></span><span style=display:flex><span>g++ --version | head -n1
</span></span><span style=display:flex><span>ldd --version | head -n1 | cut -d<span style=color:#e6db74>&#34; &#34;</span> -f2-  <span style=color:#75715e># glibc version</span>
</span></span><span style=display:flex><span>grep --version | head -n1
</span></span><span style=display:flex><span>gzip --version | head -n1
</span></span><span style=display:flex><span>cat /proc/version
</span></span><span style=display:flex><span>m4 --version | head -n1
</span></span><span style=display:flex><span>make --version | head -n1
</span></span><span style=display:flex><span>patch --version | head -n1
</span></span><span style=display:flex><span>echo Perl <span style=color:#e6db74>`</span>perl -V:version<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>python3 --version
</span></span><span style=display:flex><span>sed --version | head -n1
</span></span><span style=display:flex><span>tar --version | head -n1
</span></span><span style=display:flex><span>makeinfo --version | head -n1  <span style=color:#75715e># texinfo version</span>
</span></span><span style=display:flex><span>xz --version | head -n1
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#39;int main(){}&#39;</span> &gt; dummy.c <span style=color:#f92672>&amp;&amp;</span> g++ -o dummy dummy.c
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -x dummy <span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>then</span> echo <span style=color:#e6db74>&#34;g++ compilation OK&#34;</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> echo <span style=color:#e6db74>&#34;g++ compilation failed&#34;</span>; <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>rm -f dummy.c dummy
</span></span><span style=display:flex><span>EOF
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>bash version-check.sh
</span></span></code></pre></div><h3 id=error-1>Error 1:<a hidden class=anchor aria-hidden=true href=#error-1>#</a></h3><p><code>/bin/sh does not point to bash</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>sudo ln -sf bash /bin/sh
</span></span></code></pre></div><h3 id=error-2>Error 2:<a hidden class=anchor aria-hidden=true href=#error-2>#</a></h3><p><code>version-check.sh: line 11: bison: command not found</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>sudo apt-get install bison
</span></span></code></pre></div><h3 id=error-3>Error 3:<a hidden class=anchor aria-hidden=true href=#error-3>#</a></h3><p><code>version-check.sh: line 25: gawk: command not found</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>sudo apt-get install gawk
</span></span></code></pre></div><h3 id=error-4>Error 4:<a hidden class=anchor aria-hidden=true href=#error-4>#</a></h3><p><code>version-check.sh: line 36: g++: command not found</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>sudo apt-get install g++
</span></span></code></pre></div><h3 id=error-5>Error 5:<a hidden class=anchor aria-hidden=true href=#error-5>#</a></h3><p><code>version-check.sh: line 48: makeinfo: command not found</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>sudo apt-get update -y
</span></span><span style=display:flex><span>sudo apt-get install -y texinfo
</span></span></code></pre></div><h3 id=final-success-output>Final success output:<a hidden class=anchor aria-hidden=true href=#final-success-output>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ bash version-check.sh
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>bash, version 4.3.11<span style=color:#f92672>(</span>1<span style=color:#f92672>)</span>-release
</span></span><span style=display:flex><span>/bin/sh -&gt; /bin/bash
</span></span><span style=display:flex><span>Binutils: <span style=color:#f92672>(</span>GNU Binutils <span style=color:#66d9ef>for</span> Ubuntu<span style=color:#f92672>)</span> 2.24
</span></span><span style=display:flex><span>bison <span style=color:#f92672>(</span>GNU Bison<span style=color:#f92672>)</span> 3.0.2
</span></span><span style=display:flex><span>/usr/bin/yacc -&gt; /usr/bin/bison.yacc
</span></span><span style=display:flex><span>bzip2,  Version 1.0.6, 6-Sept-2010.
</span></span><span style=display:flex><span>Coreutils:  8.21
</span></span><span style=display:flex><span>diff <span style=color:#f92672>(</span>GNU diffutils<span style=color:#f92672>)</span> 3.3
</span></span><span style=display:flex><span>find <span style=color:#f92672>(</span>GNU findutils<span style=color:#f92672>)</span> 4.4.2
</span></span><span style=display:flex><span>GNU Awk 4.0.1
</span></span><span style=display:flex><span>/usr/bin/awk -&gt; /usr/bin/gawk
</span></span><span style=display:flex><span>gcc <span style=color:#f92672>(</span>Ubuntu 4.8.4-2ubuntu1~14.04.4<span style=color:#f92672>)</span> 4.8.4
</span></span><span style=display:flex><span>g++ <span style=color:#f92672>(</span>Ubuntu 4.8.4-2ubuntu1~14.04.4<span style=color:#f92672>)</span> 4.8.4
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>Ubuntu EGLIBC 2.19-0ubuntu6.15<span style=color:#f92672>)</span> 2.19
</span></span><span style=display:flex><span>grep <span style=color:#f92672>(</span>GNU grep<span style=color:#f92672>)</span> 2.16
</span></span><span style=display:flex><span>gzip 1.6
</span></span><span style=display:flex><span>Linux version 4.4.0-142-generic <span style=color:#f92672>(</span>buildd@lcy01-amd64-006<span style=color:#f92672>)</span> <span style=color:#f92672>(</span>gcc version 4.8.4 <span style=color:#f92672>(</span>Ubuntu 4.8.4-2ubuntu1~14.04.4<span style=color:#f92672>)</span> <span style=color:#f92672>)</span> <span style=color:#75715e>#168~14.04.1-Ubuntu SMP Sat Jan 19 11:26:28 UTC 2019</span>
</span></span><span style=display:flex><span>m4 <span style=color:#f92672>(</span>GNU M4<span style=color:#f92672>)</span> 1.4.17
</span></span><span style=display:flex><span>GNU Make 3.81
</span></span><span style=display:flex><span>GNU patch 2.7.1
</span></span><span style=display:flex><span>Perl version<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;5.18.2&#39;</span>;
</span></span><span style=display:flex><span>Python 3.4.3
</span></span><span style=display:flex><span>sed <span style=color:#f92672>(</span>GNU sed<span style=color:#f92672>)</span> 4.2.2
</span></span><span style=display:flex><span>tar <span style=color:#f92672>(</span>GNU tar<span style=color:#f92672>)</span> 1.27.1
</span></span><span style=display:flex><span>makeinfo <span style=color:#f92672>(</span>GNU texinfo<span style=color:#f92672>)</span> 5.2
</span></span><span style=display:flex><span>xz <span style=color:#f92672>(</span>XZ Utils<span style=color:#f92672>)</span> 5.1.0alpha
</span></span><span style=display:flex><span>g++ compilation OK
</span></span></code></pre></div><h2 id=25-creating-a-file-system-on-the-partition>2.5. Creating a File System on the Partition<a hidden class=anchor aria-hidden=true href=#25-creating-a-file-system-on-the-partition>#</a></h2><p>Doc link: <a href=http://www.linuxfromscratch.org/lfs/downloads/9.1/LFS-BOOK-9.1-NOCHUNKS.html#ch-partitioning-creatingfilesystem>http://www.linuxfromscratch.org/lfs/downloads/9.1/LFS-BOOK-9.1-NOCHUNKS.html#ch-partitioning-creatingfilesystem</a></p><p>I had only one partition. I need to create new <strong>physical</strong> partition for LFS.</p><blockquote><p>It is recommended to use Physical partition only not logical.</p></blockquote><p>I have reinstall my OS with new partition which is long way. You can use <a href=https://www.howtogeek.com/114503/how-to-resize-your-ubuntu-partitions/>GParted</a> to make partitions. Remember you can create only 4 Physical partition. Give 1 physical partition dedicated to LFS. Below is my partition view.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ lsblk
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
</span></span><span style=display:flex><span>sda      8:0    <span style=color:#ae81ff>0</span> 465.8G  <span style=color:#ae81ff>0</span> disk 
</span></span><span style=display:flex><span>|-sda1   8:1    <span style=color:#ae81ff>0</span>   476M  <span style=color:#ae81ff>0</span> part /boot/efi
</span></span><span style=display:flex><span>|-sda2   8:2    <span style=color:#ae81ff>0</span>   1.9G  <span style=color:#ae81ff>0</span> part <span style=color:#f92672>[</span>SWAP<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>|-sda3   8:3    <span style=color:#ae81ff>0</span> 190.8G  <span style=color:#ae81ff>0</span> part /
</span></span><span style=display:flex><span><span style=color:#e6db74>`</span>-sda4   8:4    <span style=color:#ae81ff>0</span> 272.7G  <span style=color:#ae81ff>0</span> part /lfs
</span></span></code></pre></div><h3 id=challenge-my-partition-wipe-out-after-restart-my-system>Challenge: My Partition wipe out after restart my system<a hidden class=anchor aria-hidden=true href=#challenge-my-partition-wipe-out-after-restart-my-system>#</a></h3><p>After restart I again hit the same command <code>lsblk</code>. <code>/lfs</code> partition was not there.</p><p>In Ubuntu, You need to make entry in <code>/etc/fstab</code> in order to mount the partition on restart.</p><p>You have to find first volumeId or UUID to make entry in <code>/etc/fstab</code>. You can use <code>blkid</code> command to get all UUID:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ blkid
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>/dev/sda1: UUID<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1FBD-F51A&#34;</span> TYPE<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;vfat&#34;</span> 
</span></span><span style=display:flex><span>/dev/sda2: UUID<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;9f41c453-3b5c-4537-81b0-2fb33f19ded8&#34;</span> TYPE<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;swap&#34;</span> 
</span></span><span style=display:flex><span>/dev/sda3: UUID<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1a16afba-cabb-40c7-b704-1129b7004ffb&#34;</span> TYPE<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;ext4&#34;</span> 
</span></span><span style=display:flex><span>/dev/sda4: UUID<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;b3b2eb8c-2a43-405d-97da-af8b46c743e2&#34;</span> TYPE<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;ext4&#34;</span> 
</span></span></code></pre></div><p>Above my Partition is <code>/dev/sda4</code> which is mounted on <code>/lfs</code>, So my UUID is <code>b3b2eb8c-2a43-405d-97da-af8b46c743e2</code>. Now I have added below line in <code>/etc/fstab</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>UUID<span style=color:#f92672>=</span>b3b2eb8c-2a43-405d-97da-af8b46c743e2 /lfs            ext4    rw,user,exec,errors<span style=color:#f92672>=</span>remount-ro              <span style=color:#ae81ff>0</span>       <span style=color:#ae81ff>0</span>
</span></span></code></pre></div><p>Here</p><ul><li><code>rw</code>: Read, Write</li><li><code>exec</code>: Execute</li><li><code>errors=remount-ro</code>: It will mount as Read-Only, If you get any error on mounting.</li></ul><blockquote><p>Make sure you have added <code>exec</code>, Otherwise you cannot execute any binaries from chapter <a href=http://www.linuxfromscratch.org/lfs/downloads/9.1/LFS-BOOK-9.1-NOCHUNKS.html#ch-tools-binutils-pass1>5.4. Binutils-2.34 - Pass 1</a></p></blockquote><h2 id=54-binutils-234---pass-1>5.4. Binutils-2.34 - Pass 1<a hidden class=anchor aria-hidden=true href=#54-binutils-234---pass-1>#</a></h2><p>Doc link: <a href=http://www.linuxfromscratch.org/lfs/downloads/9.1/LFS-BOOK-9.1-NOCHUNKS.html#ch-tools-binutils-pass1>http://www.linuxfromscratch.org/lfs/downloads/9.1/LFS-BOOK-9.1-NOCHUNKS.html#ch-tools-binutils-pass1</a></p><h3 id=error-1-1>Error 1:<a hidden class=anchor aria-hidden=true href=#error-1-1>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>bash: ../configure: No such file or directory
</span></span></code></pre></div><p>As I mentioned on above Section, Make sure you have added <code>exec</code> in your <code>/etc/fstab</code> entry OR Make sure your partition <code>/lfs</code> has Read, Write & Execute permission. Below <code>/etc/fstab</code> entry worked for me:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>UUID<span style=color:#f92672>=</span>b3b2eb8c-2a43-405d-97da-af8b46c743e2 /lfs            ext4    rw,user,exec,errors<span style=color:#f92672>=</span>remount-ro              <span style=color:#ae81ff>0</span>       <span style=color:#ae81ff>0</span>
</span></span></code></pre></div><p>This setting can be different for different OS.</p><h3 id=error-2-1>Error 2:<a hidden class=anchor aria-hidden=true href=#error-2-1>#</a></h3><p>I had no idea where to create <code>build</code> folder.</p><p>Below steps worked for me:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ cd $LFS/source
</span></span><span style=display:flex><span>$ tar xvf binutils-2.34.tar.xz
</span></span><span style=display:flex><span>$ cd binutils-2.34
</span></span><span style=display:flex><span>$ mkdir -v build
</span></span><span style=display:flex><span>$ cd build
</span></span><span style=display:flex><span>$ ../configure --prefix<span style=color:#f92672>=</span>/tools          <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>             --with-sysroot<span style=color:#f92672>=</span>$LFS        <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>             --with-lib-path<span style=color:#f92672>=</span>/tools/lib <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>             --target<span style=color:#f92672>=</span>$LFS_TGT          <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>             --disable-nls              <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>             --disable-werror
</span></span></code></pre></div><h2 id=55-gcc-920---pass-1>5.5. GCC-9.2.0 - Pass 1<a hidden class=anchor aria-hidden=true href=#55-gcc-920---pass-1>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cd $LFS/sources
</span></span><span style=display:flex><span>tar -xvf gcc-9.2.0.tar.xz
</span></span><span style=display:flex><span>cd gcc-9.2.0
</span></span></code></pre></div><p>After this you can continue with document flow.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>tar -xf ../mpfr-4.0.2.tar.xz
</span></span><span style=display:flex><span>mv -v mpfr-4.0.2 mpfr
</span></span><span style=display:flex><span>tar -xf ../gmp-6.2.0.tar.xz
</span></span><span style=display:flex><span>mv -v gmp-6.2.0 gmp
</span></span><span style=display:flex><span>tar -xf ../mpc-1.1.0.tar.gz
</span></span><span style=display:flex><span>mv -v mpc-1.1.0 mpc
</span></span></code></pre></div><h3 id=error-1-2>Error 1:<a hidden class=anchor aria-hidden=true href=#error-1-2>#</a></h3><p>On <code>make</code> command, I got below error:</p><h4 id=error-for-loop-initial-declarations-are-only-allowed-in-c99-mode>error: &lsquo;for&rsquo; loop initial declarations are only allowed in C99 mode<a hidden class=anchor aria-hidden=true href=#error-for-loop-initial-declarations-are-only-allowed-in-c99-mode>#</a></h4><pre tabindex=0><code>compute_powtab.c: In function &#39;mpn_compute_powtab_mul&#39;:
compute_powtab.c:142:3: error: &#39;for&#39; loop initial declarations are only allowed in C99 mode
   for (long pi = start_idx; pi &gt;= 0; pi--)
   ^
compute_powtab.c:142:3: note: use option -std=c99 or -std=gnu99 to compile your code
compute_powtab.c: In function &#39;mpn_compute_powtab_div&#39;:
compute_powtab.c:226:3: error: &#39;for&#39; loop initial declarations are only allowed in C99 mode
   for (long pi = n_pows - 1; pi &gt;= 0; pi--)
   ^
compute_powtab.c:274:13: error: redefinition of &#39;pi&#39;
   for (long pi = n_pows; pi &gt;= 0; pi--)
             ^
compute_powtab.c:226:13: note: previous definition of &#39;pi&#39; was here
   for (long pi = n_pows - 1; pi &gt;= 0; pi--)
             ^
compute_powtab.c:274:3: error: &#39;for&#39; loop initial declarations are only allowed in C99 mode
   for (long pi = n_pows; pi &gt;= 0; pi--)
   ^
compute_powtab.c: In function &#39;powtab_decide&#39;:
compute_powtab.c:296:3: error: &#39;for&#39; loop initial declarations are only allowed in C99 mode
   for (size_t pn = (un + 1) &gt;&gt; 1; pn != 1; pn = (pn + 1) &gt;&gt; 1)
   ^
compute_powtab.c:304:10: error: redefinition of &#39;pn&#39;
   size_t pn = un - 1;
          ^
compute_powtab.c:296:15: note: previous definition of &#39;pn&#39; was here
   for (size_t pn = (un + 1) &gt;&gt; 1; pn != 1; pn = (pn + 1) &gt;&gt; 1)
               ^
compute_powtab.c:308:3: error: &#39;for&#39; loop initial declarations are only allowed in C99 mode
   for (long i = n_pows - 2; i &gt;= 0; i--)
</code></pre><p>As per (<a href=https://stackoverflow.com/a/29338269)%5Bhttps://stackoverflow.com/a/29338269%5D>https://stackoverflow.com/a/29338269)[https://stackoverflow.com/a/29338269]</a>,</p><blockquote><p><strong>This happens because declaring variables inside a for loop wasn&rsquo;t valid C until C99(which is the standard of C published in 1999).</strong></p></blockquote><h4 id=how-i-sovled-this>How I sovled this?<a hidden class=anchor aria-hidden=true href=#how-i-sovled-this>#</a></h4><p>Open file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>vim $LFS/sources/gcc-9.2.0/build/gmp/mpn/compute_powtab.c
</span></span></code></pre></div><p><strong>We will solve first error:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>compute_powtab.c:226:3: error: <span style=color:#e6db74>&#39;for&#39;</span> loop initial declarations are only allowed in C99 mode
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>long pi <span style=color:#f92672>=</span> n_pows - 1; pi &gt;<span style=color:#f92672>=</span> 0; pi--<span style=color:#f92672>)</span>
</span></span></code></pre></div><p>Changes on line number 226:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>  long pi;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>pi <span style=color:#f92672>=</span> n_pows - 1; pi &gt;<span style=color:#f92672>=</span> 0; pi--<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span></code></pre></div><p>Just declare <code>long pi;</code> outside the loop. Similarly you can solve above all errors.</p><p><strong>OR</strong></p><p>You can download my edited version of <a href=https://ashish.one/download/compute_powtab.c>compute_powtab.c</a>, Place in <code>$LFS/sources/gcc-9.2.0/build/gmp/mpn/</code>.</p><p>Hit</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>make
</span></span></code></pre></div><p>Now it should works :)</p><h2 id=57-glibc-231>5.7. Glibc-2.31<a hidden class=anchor aria-hidden=true href=#57-glibc-231>#</a></h2><p>On below command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>../configure                             <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>      --prefix<span style=color:#f92672>=</span>/tools                    <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>      --host<span style=color:#f92672>=</span>$LFS_TGT                    <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>      --build<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>../scripts/config.guess<span style=color:#66d9ef>)</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>      --enable-kernel<span style=color:#f92672>=</span>3.2                <span style=color:#ae81ff>\
</span></span></span></code></pre></div><h3 id=error-these-critical-programs-are-missing-or-too-old-make>Error: These critical programs are missing or too old: make<a hidden class=anchor aria-hidden=true href=#error-these-critical-programs-are-missing-or-too-old-make>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>configure: error:
</span></span><span style=display:flex><span>*** These critical programs are missing or too old: make
</span></span><span style=display:flex><span>*** Check the INSTALL file <span style=color:#66d9ef>for</span> required versions.
</span></span></code></pre></div><p>I checked my current <code>make</code> version:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ make --version
</span></span><span style=display:flex><span>GNU Make 3.81
</span></span><span style=display:flex><span>Copyright <span style=color:#f92672>(</span>C<span style=color:#f92672>)</span> <span style=color:#ae81ff>2006</span>  Free Software Foundation, Inc.
</span></span><span style=display:flex><span>This is free software; see the source <span style=color:#66d9ef>for</span> copying conditions.
</span></span><span style=display:flex><span>There is NO warranty; not even <span style=color:#66d9ef>for</span> MERCHANTABILITY or FITNESS FOR A
</span></span><span style=display:flex><span>PARTICULAR PURPOSE.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>This program built <span style=color:#66d9ef>for</span> x86_64-pc-linux-gnu
</span></span></code></pre></div><p>As per (<a href=https://stackoverflow.com/a/31915313)%5Bhttps://stackoverflow.com/a/31915313%5D>https://stackoverflow.com/a/31915313)[https://stackoverflow.com/a/31915313]</a></p><blockquote><p><strong>Due to a long-standing unresolved Debian bug report, GNU Make remained the age-old 3.81 in Debian for a very long time, and as a consequence, in Debian-based distributions such as Ubuntu and Mint.</strong></p></blockquote><p>So we need to upgrade our make version. Below steps worked for me.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cd /tmp
</span></span><span style=display:flex><span>wget http://ftp.gnu.org/gnu/make/make-4.1.tar.gz
</span></span><span style=display:flex><span>tar xvf make-4.1.tar.gz
</span></span><span style=display:flex><span>cd make-4.1/
</span></span><span style=display:flex><span>./configure
</span></span><span style=display:flex><span>make
</span></span><span style=display:flex><span>sudo make install
</span></span><span style=display:flex><span>sudo mv /usr/local/bin/make /usr/bin/make
</span></span></code></pre></div><p>Now again hit <code>../configure ..</code> command, Now it should work :)</p><h2 id=67-linux-553-api-headers>6.7. Linux-5.5.3 API Headers<a hidden class=anchor aria-hidden=true href=#67-linux-553-api-headers>#</a></h2><h3 id=error>Error<a hidden class=anchor aria-hidden=true href=#error>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#f92672>(</span>lfs chroot<span style=color:#f92672>)</span> root:/sources/linux-5.5.3# make mrproper
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>/bin/sh: sed: command not found
</span></span><span style=display:flex><span>Makefile:653: arch//Makefile: No such file or directory
</span></span><span style=display:flex><span>make: *** No rule to make target <span style=color:#e6db74>&#39;arch//Makefile&#39;</span>.  Stop.
</span></span></code></pre></div><p>Because of my silly mistake. I had not installed the sed package. I just reinstall the package.</p><h2 id=612-bzip2-108>6.12. Bzip2-1.0.8<a hidden class=anchor aria-hidden=true href=#612-bzip2-108>#</a></h2><h3 id=error-6>Error:<a hidden class=anchor aria-hidden=true href=#error-6>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>collect2: error: ld returned <span style=color:#ae81ff>1</span> exit status
</span></span><span style=display:flex><span>make: *** <span style=color:#f92672>[</span>Makefile-libbz2_so:38: all<span style=color:#f92672>]</span> Error <span style=color:#ae81ff>1</span>
</span></span></code></pre></div><p>Just hit <code>make clean</code>.<br>Again run <code>make -f Makefile-libbz2_so</code>.</p><h2 id=618-binutils-234>6.18. Binutils-2.34<a hidden class=anchor aria-hidden=true href=#618-binutils-234>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ make -k check
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>make<span style=color:#f92672>[</span>5<span style=color:#f92672>]</span>: *** <span style=color:#f92672>[</span>Makefile:2565: check-DEJAGNU<span style=color:#f92672>]</span> Error <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>make<span style=color:#f92672>[</span>5<span style=color:#f92672>]</span>: Leaving directory <span style=color:#e6db74>&#39;/sources/binutils-2.34/build_6.18/ld&#39;</span>
</span></span><span style=display:flex><span>make<span style=color:#f92672>[</span>4<span style=color:#f92672>]</span>: *** <span style=color:#f92672>[</span>Makefile:1902: check-am<span style=color:#f92672>]</span> Error <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>make<span style=color:#f92672>[</span>4<span style=color:#f92672>]</span>: Leaving directory <span style=color:#e6db74>&#39;/sources/binutils-2.34/build_6.18/ld&#39;</span>
</span></span><span style=display:flex><span>make<span style=color:#f92672>[</span>3<span style=color:#f92672>]</span>: *** <span style=color:#f92672>[</span>Makefile:1771: check-recursive<span style=color:#f92672>]</span> Error <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>make<span style=color:#f92672>[</span>3<span style=color:#f92672>]</span>: Leaving directory <span style=color:#e6db74>&#39;/sources/binutils-2.34/build_6.18/ld&#39;</span>
</span></span><span style=display:flex><span>make<span style=color:#f92672>[</span>2<span style=color:#f92672>]</span>: *** <span style=color:#f92672>[</span>Makefile:1904: check<span style=color:#f92672>]</span> Error <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>make<span style=color:#f92672>[</span>2<span style=color:#f92672>]</span>: Leaving directory <span style=color:#e6db74>&#39;/sources/binutils-2.34/build_6.18/ld&#39;</span>
</span></span><span style=display:flex><span>make<span style=color:#f92672>[</span>1<span style=color:#f92672>]</span>: *** <span style=color:#f92672>[</span>Makefile:7568: check-ld<span style=color:#f92672>]</span> Error <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>make<span style=color:#f92672>[</span>1<span style=color:#f92672>]</span>: Leaving directory <span style=color:#e6db74>&#39;/sources/binutils-2.34/build_6.18&#39;</span>
</span></span><span style=display:flex><span>make: *** <span style=color:#f92672>[</span>Makefile:2222: <span style=color:#66d9ef>do</span>-check<span style=color:#f92672>]</span> Error <span style=color:#ae81ff>2</span>
</span></span></code></pre></div><p>As I research these are few common errors But as I have not found any solution So I jump on to the next step as suggested in various places.</p><p><code>make tooldir=/usr install</code></p><p>If you get any solution of above error, Feel free to comment below.</p><h2 id=625-gcc-920>6.25. GCC-9.2.0<a hidden class=anchor aria-hidden=true href=#625-gcc-920>#</a></h2><h3 id=error-1-3>Error 1:<a hidden class=anchor aria-hidden=true href=#error-1-3>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>make: *** <span style=color:#f92672>[</span>Makefile:2295: <span style=color:#66d9ef>do</span>-check<span style=color:#f92672>]</span> Error <span style=color:#ae81ff>2</span>
</span></span></code></pre></div><p>I ignored this and move to next steps.</p><h3 id=error-2-got-no-output-with-below-command>Error 2: Got no output with below command:<a hidden class=anchor aria-hidden=true href=#error-2-got-no-output-with-below-command>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>echo <span style=color:#e6db74>&#39;int main(){}&#39;</span> &gt; dummy.c
</span></span><span style=display:flex><span>cc dummy.c -v -Wl,--verbose &amp;&gt; dummy.log
</span></span><span style=display:flex><span>readelf -l a.out | grep <span style=color:#e6db74>&#39;: /lib&#39;</span>
</span></span></code></pre></div><p>Performed below steps as mentioned on this link <a href=https://stackoverflow.com/a/48289145>https://stackoverflow.com/a/48289145</a>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>gcc -dumpspecs | sed -e <span style=color:#e6db74>&#39;s@/tools@@g&#39;</span> &gt; <span style=color:#e6db74>`</span>dirname <span style=color:#66d9ef>$(</span>gcc --print-libgcc-file-name<span style=color:#66d9ef>)</span><span style=color:#e6db74>`</span>/specs
</span></span></code></pre></div><p>Again perform above command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>echo <span style=color:#e6db74>&#39;int main(){}&#39;</span> &gt; dummy.c
</span></span><span style=display:flex><span>$ cc dummy.c -v -Wl,--verbose &amp;&gt; dummy.log
</span></span><span style=display:flex><span>readelf -l a.out | grep <span style=color:#e6db74>&#39;: /lib&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>[</span>Requesting program interpreter: /lib64/ld-linux-x86-64.so.2<span style=color:#f92672>]</span>
</span></span></code></pre></div><h2 id=641-perl-5301>6.41. Perl-5.30.1<a hidden class=anchor aria-hidden=true href=#641-perl-5301>#</a></h2><h3 id=error-7>Error:<a hidden class=anchor aria-hidden=true href=#error-7>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>erlio.c:<span style=color:#f92672>(</span>.text+0x91b<span style=color:#f92672>)</span>: undefined reference to <span style=color:#e6db74>`</span>pthread_getspecific<span style=color:#e6db74>&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>/usr/bin/ld: perlio.o:perlio.c:(.text+0x44e4): more undefined references to `pthread_getspecific&#39;</span> follow
</span></span><span style=display:flex><span>collect2: error: ld returned <span style=color:#ae81ff>1</span> exit status
</span></span><span style=display:flex><span>make: *** <span style=color:#f92672>[</span>makefile:364: lib/buildcustomize.pl<span style=color:#f92672>]</span> Error <span style=color:#ae81ff>1</span>
</span></span></code></pre></div><p>Solution which suggested here <a href=https://www.linuxquestions.org/questions/linux-from-scratch-13/errors-with-6-40-perl-5-28-0-a-4175642138/>https://www.linuxquestions.org/questions/linux-from-scratch-13/errors-with-6-40-perl-5-28-0-a-4175642138/</a> It worked for me.</p><p>it&rsquo;s due to not having deleted the extracted Perl-5.28.0 directory after Chapter 5. I deleted the folder. Again untar the file.</p><h2 id=84-using-grub-to-set-up-the-boot-process>8.4. Using GRUB to Set Up the Boot Process<a hidden class=anchor aria-hidden=true href=#84-using-grub-to-set-up-the-boot-process>#</a></h2><p><strong>NOTE</strong>: I have not performed this section, Becuase I am going to use my host system&rsquo;s (Ubuntu 14.04) GRUB bootloader. Just go to another terminal of host system and hit below command.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>sudo update-grub2
</span></span></code></pre></div><p>After this again go to old terminal(LFS) and proceed with next step (The End).</p><p>Please comment below if you facing any issue.</p><p>Thanks</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://ashish.one/tags/linux/>linux</a></li><li><a href=https://ashish.one/tags/linuxfromscratch/>linuxfromscratch</a></li><li><a href=https://ashish.one/tags/lfs/>LFS</a></li><li><a href=https://ashish.one/tags/linuxfromscratch.org/>linuxfromscratch.org</a></li><li><a href=https://ashish.one/tags/ubuntu/>ubuntu</a></li></ul><nav class=paginav><a class=prev href=https://ashish.one/blogs/add-responsive-google-slides-on-hugo/><span class=title>Â« Prev</span><br><span>Add Responsive Google Slides on Hugo</span></a>
<a class=next href=https://ashish.one/blogs/setup-grafana-with-prometheus/><span class=title>Next Â»</span><br><span>[Part 4] Setup Grafana With Prometheus</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Challenges in linuxfromscratch on twitter" href="https://twitter.com/intent/tweet/?text=Challenges%20in%20linuxfromscratch&url=https%3a%2f%2fashish.one%2fblogs%2fchallenges-in-linuxfromscratch%2f&hashtags=linux%2clinuxfromscratch%2clfs%2cLFS%2clinuxfromscratch.org%2cubuntu"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Challenges in linuxfromscratch on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fashish.one%2fblogs%2fchallenges-in-linuxfromscratch%2f&title=Challenges%20in%20linuxfromscratch&summary=Challenges%20in%20linuxfromscratch&source=https%3a%2f%2fashish.one%2fblogs%2fchallenges-in-linuxfromscratch%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Challenges in linuxfromscratch on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fashish.one%2fblogs%2fchallenges-in-linuxfromscratch%2f&title=Challenges%20in%20linuxfromscratch"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Challenges in linuxfromscratch on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fashish.one%2fblogs%2fchallenges-in-linuxfromscratch%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Challenges in linuxfromscratch on whatsapp" href="https://api.whatsapp.com/send?text=Challenges%20in%20linuxfromscratch%20-%20https%3a%2f%2fashish.one%2fblogs%2fchallenges-in-linuxfromscratch%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Challenges in linuxfromscratch on telegram" href="https://telegram.me/share/url?text=Challenges%20in%20linuxfromscratch&url=https%3a%2f%2fashish.one%2fblogs%2fchallenges-in-linuxfromscratch%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer><script src=https://giscus.app/client.js data-repo=ashishtiwari1993/ashish.one data-repo-id="MDEwOlJlcG9zaXRvcnkyMTAxMjkzNjY=" data-category=General data-category-id=DIC_kwDODIZR1s4CP1P2 data-mapping=title data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=dark_high_contrast data-lang=en crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2023 <a href=https://ashish.one/>ashish.one</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>